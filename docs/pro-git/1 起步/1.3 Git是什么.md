# Git 是什么

若你理解了 Git 的思想和基本工作原理，用起来就会知其所以然，游刃有余。

## 直接记录快照，而非差异比较

Git 和其他版本控制系统的主要差别在于对待数据的方式。

从概念上说，其他大部分系统以文件变更列表的方式存储信息，将他们存储的信息看作是一组基本文件和每个文件随时间逐步累积的差异（**基于差异的版本控制**）。

反之，Git 更像是把数据看作是对小型文件系统的一系列快照。在 Git 中，每当你提交更新或保存项目状态时，它基本上都就会对当时的全部文件创建一个快照并保存这个快照的索引。为了效率，如果文件没有修改，Git 不再重新存储该文件，而是只保留一个链接指向之前存储的文件。Git 对待数据更像是一个**快照流**。

Git 更像是一个小型文件系统，提供了许多以次为基础构建的超强工具，而不只是一个简单的 VCS。

## 近乎所有操作都是本地执行

在 Git 中的绝大多数操作读只需要访问本地文件和资源，一般不需要来自网络上其他计算机的信息。因为你在本地磁盘上就有项目的完整历史，所以大部分操作看起来瞬间完成。

## Git 保证完整性

Git 中所有的数据在存储前都计算校验和，然后以校验来引用。这意味着不可能在 Git 不知情时更改任何文件或目录内容。这个功能建构在 Git 底层，是构成 Git 哲学不可或缺的部分。

Git 用以计算校验和的机制叫做 SHA-1 散列。这是一个由 40 哥十六进制字符组成的字符串，基于 Git 中文件的内容或目录结构计算出来。

```
24b9da6552252987aa493b52f8696cd6d3b00373
```

Git 中使用这种哈希值的情况很多，Git 数据库中保存的信息都是以文件内容的哈希值来索引，而不是文件名。

## Git 一般只添加数据

你执行的任何 Git 操作，几乎只往 Git 数据库中**添加**数据。你很难使用 Git 从数据库中删除数据，也就是说 Git 几乎不会执行任何可能导致文件不可恢复的操作。

## 三种状态

Git 有三种状态，你的文件可能处于其中之一：

* 已修改：修改了文件，但还没保存到数据库中。
* 已暂存：对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中。
* 已提交：数据已安全地保存在本地数据库中。

这会让我们的 Git 项目拥有三个阶段：

* 工作区：对项目的某个版本独立提取出来的内容，从 Git 仓库的压缩数据库中提取出来的文件，放在磁盘上供你使用或修改。
* 暂存区：一个文件，保存了下次将要提交的文件列表信息，一般在 Git 仓库目录中。按照 Git 的术语叫做“索引”。
* Git 仓库目录：Git 用来保存项目的元数据和对象数据库的地方，是 Git 中最重要的部分，从其他计算机克隆仓库时，复制的就是这里的数据。

基本的 Git 工作流程如下：

1. 在工作区中修改文件。
2. 将你想要下次提交的更改选择性的暂存，这样只会将更改的部分添加到暂存区。
3. 提交更新时，找到暂存区的文件，将快找永久性存储到 Git 目录。
